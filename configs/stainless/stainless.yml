# Stainless SDK Configuration for Chronocast API
# yaml-language-server: $schema=https://app.stainlessapi.com/config.schema.json

organization:
  name: wndrco
  docs: https://chronocast.dev/docs

targets:
  node:
    package_name: chronocast
    production_repo: wndrco/chronocast-node
    publish:
      npm: true

client_settings:
  idempotency:
    header: Idempotency-Key
  opts:
    api_key:
      type: string
      read_env: CHRONOCAST_API_KEY
      auth:
        security_scheme: apiKey
    bearer_token:
      type: string
      nullable: true
      read_env: CHRONOCAST_BEARER_TOKEN
      auth:
        security_scheme: bearerAuth

environments:
  production: https://api.chronocast.dev/v1
  local_development: http://localhost:3737/v1

pagination:
  - name: cursor_page
    type: cursor
    request:
      cursor: cursor
      limit: limit
    response:
      next_cursor: next_cursor
      has_more: has_more
      results: data
  - name: offset_page
    type: offset
    request:
      offset: offset
      limit: limit
    response:
      total: total
      results: data

resources:
  organizations:
    methods:
      list:
        endpoint: get /organizations
        pagination: cursor_page
      create: post /organizations
      retrieve: get /organizations/{org_id}
      update: patch /organizations/{org_id}
      delete: delete /organizations/{org_id}

    subresources:
      members:
        methods:
          list:
            endpoint: get /organizations/{org_id}/members
            pagination: cursor_page
          invite: post /organizations/{org_id}/members

      projects:
        methods:
          list:
            endpoint: get /organizations/{org_id}/projects
            pagination: cursor_page
          create: post /organizations/{org_id}/projects
          retrieve: get /organizations/{org_id}/projects/{project_id}
          delete: delete /organizations/{org_id}/projects/{project_id}

        subresources:
          datasets:
            methods:
              list:
                endpoint: get /organizations/{org_id}/projects/{project_id}/datasets
                pagination: cursor_page
              create: post /organizations/{org_id}/projects/{project_id}/datasets
              upload: post /organizations/{org_id}/projects/{project_id}/datasets/upload
              retrieve: get /organizations/{org_id}/projects/{project_id}/datasets/{dataset_id}
              delete: delete /organizations/{org_id}/projects/{project_id}/datasets/{dataset_id}
              download: get /organizations/{org_id}/projects/{project_id}/datasets/{dataset_id}/download

          models:
            methods:
              list:
                endpoint: get /organizations/{org_id}/projects/{project_id}/models
                pagination: cursor_page
              create: post /organizations/{org_id}/projects/{project_id}/models
              retrieve: get /organizations/{org_id}/projects/{project_id}/models/{model_id}
              delete: delete /organizations/{org_id}/projects/{project_id}/models/{model_id}
              train: post /organizations/{org_id}/projects/{project_id}/models/{model_id}/train

            subresources:
              predictions:
                methods:
                  create:
                    endpoint: post /organizations/{org_id}/projects/{project_id}/models/{model_id}/predict

          predictions:
            methods:
              create_batch: post /organizations/{org_id}/projects/{project_id}/predictions/batch

          alerts:
            methods:
              list:
                endpoint: get /organizations/{org_id}/projects/{project_id}/alerts
                pagination: cursor_page
              create: post /organizations/{org_id}/projects/{project_id}/alerts
              retrieve: get /organizations/{org_id}/projects/{project_id}/alerts/{alert_id}
              update: patch /organizations/{org_id}/projects/{project_id}/alerts/{alert_id}
              delete: delete /organizations/{org_id}/projects/{project_id}/alerts/{alert_id}
              list_history:
                endpoint: get /organizations/{org_id}/projects/{project_id}/alerts/{alert_id}/history
                pagination: offset_page

  operations:
    methods:
      retrieve: get /operations/{operation_id}
      cancel: post /operations/{operation_id}/cancel

  webhooks:
    methods:
      list:
        endpoint: get /webhooks
        pagination: cursor_page
      create: post /webhooks
      retrieve: get /webhooks/{webhook_id}
      delete: delete /webhooks/{webhook_id}
      list_deliveries:
        endpoint: get /webhooks/{webhook_id}/deliveries
        pagination: cursor_page
      verify_signature: post /webhooks/{webhook_id}/verify

settings:
  license: MIT

readme:
  example_requests:
    default:
      type: request
      endpoint: get /organizations
      params: {}
    headline:
      type: request
      endpoint: post /organizations
      params:
        name: "Acme Corp"
        slug: "acme"
        plan: "pro"
